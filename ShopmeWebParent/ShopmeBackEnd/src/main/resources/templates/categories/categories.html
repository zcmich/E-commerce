<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments :: page_head('Categories table - shopmeAdmin')"/>

<body>
<div class="container-fluid">
    <div>

        <div th:replace="nav :: menu"></div>

        <div>
            <h2>Manage Categories</h2>
            <a th:href="@{/categories/new}" class="fas fa-folder-plus fa-2x icon-dark"></a>
            &nbsp;| &nbsp;
            <a th:href="@{/categories/export/csv} " class="fas fa-file-csv fa-2x icon-dark"></a>
            &nbsp;| &nbsp;
            <a th:href="@{/categories/export/excel}" class="fas fa-file-excel fa-2x icon-dark"></a>
            &nbsp;| &nbsp;
            <a th:href="@{/categories/export/pdf}" class="fas fa-file-pdf fa-2x icon-dark"></a>
        </div>

        <div th:if="${message != null}" class="alert alert-success text-center col-sm-8 offset-sm-3">
            [[${message}]]
        </div>

        <div th:replace="fragments :: search_form('/categories/page/1')">


        <div class="full-details">
            <table class="table table-bordered table-striped table-hover table-responsive-xl">
                <thead class="thead-dark">
                <tr>
                    <th>ID</th>

                    <th>Category Image</th>

                    <th>
                     <a class="text-white" th:href="@{'/categories/page/'+ ${currentPage} + '?sortDir=' + ${reverseSortDir} }"> Category Name </a>
                        <span
                              th:class="${reverseSortDir} == 'desc' ? 'fas fa-sort-up' : 'fas fa-sort-down'">

      </span>
                    </th>

                    <th>Alias</th>

                    <th>Enabled</th>

                    <th></th>
                </tr>

                </thead>
                <tbody>
                <tr th:each="category : ${listCategories}">
                    <td > [[${category.id}]] </td>
                    <td>
                        <img th:src="@{${category.getImagePath()}}" style="width: 100px" class="img-fluid"/>
                    </td>
                    <td >[[${category.name}]]</td>
                    <td>[[${category.alias}]]</td>
                    <td>
                        <a th:if="${category.enabled == true}" class="fas fa-check-circle fa-2x icon-green"
                           th:href="@{'/categories/' + ${category.id} + '/enabled/false'}" title="Disable this category"></a>
                        <a th:if="${category.enabled == false}" class="fas fa-circle fa-2x icon-dark "
                           th:href="@{'/categories/' + ${category.id} + '/enabled/true'}" title="Enable this category"></a>

                    </td>

                    <td>
                        <div th:replace="fragments :: category_actions"></div>

                    </td>
                </tr>
                </tbody>
            </table>

            <div th:replace="modal_fragments :: confirm_modal"></div>

            <div th:replace="modal_fragments :: modal_dialog"></div>

            <div th:replace="fragments :: pagination('/categories', 'categories')"></div>

            <div th:replace="fragments :: footer"></div>

        </div>


    </div>


</div>
<script th:src="@{/js/common_list.js}" ></script>
<script th:src="@{/js/common_form.js}" type="text/javascript"></script>
<script type="text/javascript">
    moduleURL = "[[@{/categories}]]";
    $(document).ready(function () {
        // $(".link-delete").on("click",function (e) {
        //    e.preventDefault();
        //    showDeleteConfirmModal($(this), 'category');
        // });

        // $(".cant-delete").on("click",function (e) {
        //     // e.preventDefault();
        //     showWarningModal("Category has children and cannot be deleted");
        // });

        $(".cannot-delete").click(function (e) {
            e.preventDefault();
            console.log("hello")
            showWarningModal("Category has children and cannot be deleted");
        });

    });
</script>
</body>
</html>